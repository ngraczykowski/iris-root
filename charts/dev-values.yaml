ingress:
  annotations:
    kubernetes.io/ingress.class: nginx-internal
  hosts:
    - aha-test.dev.s8ops.com

common:
  image:
    pullPolicy: Always

  args:
    - --serp.show-env=true

  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 1Gi

components:
  payments-bridge:
    enabled: true

    configFiles:
      application.yml: |
        pb:
          alert-message:
            original-message-deleted-after-recommendation: false
          cmapi:
            callback:
              client-registration-id: callback
              enabled: false
              endpoint: "https://cmapi-mock.nomad.silenteight.com/callback-recommendation"
          data-retention:
            alert-data:
              expiration: "365d"
              cron: "*/60 * * * * *"
            personal-information:
              expiration: "1h"
              cron: "* * * * * *"
          email-notification:
            from: "noreply+sierra@silenteight.com"
            to: "proj-svb-ts@silenteight.com"
            cron: "0 0/10 * * * *"
            amount: 10
            cmapiEnabled: false
            learningEnabled: false
          metrics:
            alert-resolution:
              percentiles: [ 0.5, 0.95 ]
          svb-learning:
            discriminator: ""
            aws:
              file-list:
                bucket-name: todo-add-bucket
                prefix: learning
            store:
              skip-deletion: true
            use-new-learning: true

  adjudication-engine:
    args:
      - --spring.profiles.active=rabbitdeclare

  governance:
    args:
      - --spring.profiles.active=linux,governance,database,rabbitmq,messaging,sierra

  simulator:
    args:
      - --spring.profiles.active=linux,simulator,messaging,sierra

  webapp:
    args:
      - --spring.profiles.active=sierra

  warehouse:
    args:
      - --spring.profiles.active=linux,warehouse,messaging,sierra
      # FIXME(ahaczewski): Required to repeat configuration from `keycloak` below due to overwriting
      #  environment variable defined directly in the WebApp container image.
      - --keycloak.frontend-client-id=dev-frontend

    configFiles:
      application.yml: |
        warehouse:
          report:
            default-bucket: todo-add-bucket

        sep:
          filestorage:
            minio:
              privateKey: dummy
              accessKey: dummy
              url: https://todo-add-bucket.s3.eu-central-1.amazonaws.com
              region: eu-central-1

  agents:
    name-agent:
      args:
        - --spring.profiles.active=sierra,rabbitmq-declare
        - --linguistics.name.facade.enabled=true

      resources:
        limits:
          memory: 2Gi
        requests:
          memory: 1Gi

frontend:
  resources:
    limits:
      memory: 256Mi
    requests:
      memory: 128Mi

keycloak:
  authServerUrl: https://auth.silenteight.com
  realm: sens-webapp
  frontendClientId: dev-frontend
