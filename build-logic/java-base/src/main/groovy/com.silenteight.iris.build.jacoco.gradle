plugins {
  id 'java'
  id 'jacoco'
}

def jacocoTestReport = tasks.named('jacocoTestReport', JacocoReport) {
  reports.xml.required = true
}

tasks.named('test') {
  finalizedBy jacocoTestReport
}
