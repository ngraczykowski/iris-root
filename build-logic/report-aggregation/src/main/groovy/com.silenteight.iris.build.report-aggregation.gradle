plugins {
  id('base')
  id('jacoco-report-aggregation')
  id('test-report-aggregation')
}

reporting {
  reports {
    testCodeCoverageReport(JacocoCoverageReport) {
      testType = TestSuiteType.UNIT_TEST
    }
    testAggregateTestReport(AggregateTestReport) {
      testType = TestSuiteType.UNIT_TEST
    }
  }
}

tasks.named('check') {
  dependsOn tasks.named('testAggregateTestReport', TestReport)
  dependsOn tasks.named('testCodeCoverageReport', JacocoReport)
}
