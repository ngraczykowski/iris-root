include:
  - project: 'build/gitlab-ci-templates'
    file: '.python_job_template.yml'
  - project: 'build/gitlab-ci-templates'
    file: '.python_build_job_template.yml'

stages:
  - build

test:
  extends: .python_build_job_template
  image: python:3.7
  stage: build
  only:
    - master
    - merge_requests
  script:
    - scripts/build.sh
  artifacts:
    when: always
    reports:
      cobertura: .tox/coverage-report.xml
      junit:
        - .tox/flake8-report.xml
        - .tox/mypy-report.xml
        - .tox/pytest-report.xml