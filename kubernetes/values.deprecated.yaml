## This values file is deprecated. Please use other files, as specified in README.md
##
ingress:
  annotations:
    kubernetes.io/ingress.class: nginx-internal

mailhog:
  resources:
    limits:
      memory: 128Mi
    requests:
      memory: 64Mi

common:
  image:
    pullPolicy: Always

  args:
    - --serp.show-env=true

  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 1Gi

agentsCommon:
  enabled: true
  args:
    - --spring.profiles.include=rabbitmq-declare
  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 512Mi

components:
  payments-bridge:
    enabled: true
    args:
      - --spring.profiles.active=mockaws,mockemail
      - --spring.security.oauth2.client.registration.callback.client-id=cmapi-dev
      - --spring.security.oauth2.client.provider.external.token-uri=https://auth.silent8.cloud/realms/egress-mock/protocol/openid-connect/token

  adjudication-engine:
    args:
      - --spring.profiles.active=rabbitdeclare

  governance:
    args:
      - --spring.profiles.active=linux,governance,database,rabbitmq,messaging,sierra

  simulator:
    args:
      - --spring.profiles.active=linux,simulator,messaging,sierra

  webapp:
    args:
      - --spring.profiles.active=sierra

  warehouse:
    args:
      - --spring.profiles.active=linux,warehouse,messaging,sierra
      # FIXME(ahaczewski): Required to repeat configuration from `keycloak` below due to overwriting
      #  environment variable defined directly in the WebApp container image.
      - --keycloak.frontend-client-id=dev-frontend

    configFiles:
      application.yml: |
        warehouse:
          report:
            default-bucket: todo-add-bucket

        sep:
          filestorage:
            minio:
              privateKey: dummy
              accessKey: dummy
              url: https://todo-add-bucket.s3.eu-central-1.amazonaws.com
              region: eu-central-1

agents:
  name-agent:
    args:
      - --spring.profiles.active=sierra
      - --linguistics.name.facade.enabled=true
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi
  date-agent:
    args:
      - --spring.profiles.active=sierra
      - --dob.agent.facade.enabled=true
  document-comparer-agent:
    args:
      - --spring.profiles.active=sierra
      - --nationalId.agent.facade.enabled=true
  document-recognizer-agent:
    args:
      - --spring.profiles.active=sierra
  document-number-agent:
    args:
      - --spring.profiles.active=sierra
      - --document.agent.facade.enabled=true
  geo-agent:
    args:
      - --spring.profiles.active=sierra
      - --geo.agent.facade.enabled=true
      - --geotransactions.agent.facade.enabled=true
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi
  learning-engine:
    args:
      - --spring.profiles.active=sierra
      - --learning.agent.facade.enabled=true
      - --geotransactions.agent.facade.enabled=true
    resources:
      limits:
        memory: 1Gi
      requests:
        memory: 768Mi
  freetext-agent:
    args:
      - --spring.profiles.active=sierra
      - --freetext.agent.facade.enabled=true
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi
  gender-agent:
    args:
      - --gender.agent.facade.enabled=true
  region-agent:
    args:
      - --spring.profiles.active=sierra
      - --region.agent.facade.enabled=true
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

frontend:
  resources:
    limits:
      memory: 256Mi
    requests:
      memory: 128Mi

keycloak:
  authServerUrl: https://auth.silenteight.com
  realm: sens-webapp
  frontendClientId: dev-frontend
  jwtIssuerUri: "{{ .Values.keycloak.authServerUrl }}/realms/{{ .Values.keycloak.realm }}"
