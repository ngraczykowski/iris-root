## This values configure Hotel environment, with HSBC Bridge as bridge
##
components:
  hsbc-bridge:
    enabled: true
    profiles:
      - consuldisabled
    image:
      repository: registry.dev.s8ops.com/hsbc/hsbc-bridge
      tag: "snapshot"

    dbName: "hb"
    webPath: "hb"

  warehouse:
    enabled: true
    profiles:
      - linux
      - warehouse
      - messaging
      - hotel
    configFiles:
      application-hotel.yml: |
        warehouse:
          persistence:
            alert:
              labels:
                - "s8_lobCountryCode"
              recommendation-date-field: "recommendationDate"
          report:
            statistics:
              all-alerts-query:
                SELECT count(*)
                FROM warehouse_simulation_alert
                WHERE analysis_name = ?
              solved-alerts-query:
                SELECT count(*)
                FROM warehouse_simulation_alert
                WHERE analysis_name = ?
                AND (payload ->> 'recommendation_recommended_action')
                IN ('ACTION_FALSE_POSITIVE', 'ACTION_POTENTIAL_TRUE_POSITIVE')
              ai-false-positive-query:
                SELECT count(*)
                FROM warehouse_simulation_alert wsa
                JOIN warehouse_alert wa ON wsa.name = wa.name
                WHERE wsa.analysis_name = ?
                AND (wa.payload ->> 'analyst_decision') IN ('analyst_decision_false_positive', 'analyst_decision_true_positive')
                AND (wsa.payload ->> 'recommendation_recommended_action') = 'ACTION_FALSE_POSITIVE'
              analyst-false-positive-query:
                SELECT count(*)
                FROM warehouse_simulation_alert wsa
                JOIN warehouse_alert wa ON wsa.name = wa.name
                WHERE wsa.analysis_name = ?
                AND (wa.payload ->> 'analyst_decision') = 'analyst_decision_false_positive'
                AND (wsa.payload ->> 'recommendation_recommended_action') = 'ACTION_FALSE_POSITIVE'

agents:
  name-agent:
    image:
      repository: registry.dev.s8ops.com/linguistics-agent-hotel-ns
    enabled: true

  geo-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/geo-agent-hotel

  allow-list-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/allow-list-agent-hotel

  is-pep-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/is-pep-agent-hotel

  historical-decisions-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/historical-decisions-agent
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

  date-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/date-agent-hotel-ns
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

  country-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/country-agent
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

  gender-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/gender-agent
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi


  document-comparer-agent:
    enabled: true
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

  document-number-agent:
    resources:
      limits:
        memory: 2Gi
      requests:
        memory: 1Gi

  learning-engine:
    enabled: true
