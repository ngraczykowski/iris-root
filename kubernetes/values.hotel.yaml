## This values configure Hotel environment, with HSBC Bridge as bridge
##
components:
  hsbc-bridge:
    enabled: true
    profiles:
      - consuldisabled
    image:
      repository: registry.dev.s8ops.com/iris/hsbc-bridge-app
    dbName: "hb"
    webPath: "hb"

  warehouse:
    enabled: true
    profiles:
      - linux
      - warehouse
      - messaging
      - hotel
    configFiles:
      application-hotel.yml: |
        warehouse:
          persistence:
            alert:
              labels:
                - "s8_lobCountryCode"
              recommendation-date-field: "recommendationDate"
          report:
            statistics:
              all-alerts-query:
                SELECT count(*)
                FROM warehouse_simulation_alert
                WHERE analysis_name = ?
              solved-alerts-query:
                SELECT count(*)
                FROM warehouse_simulation_alert
                WHERE analysis_name = ?
                AND (payload ->> 'recommendation_recommended_action')
                IN ('ACTION_FALSE_POSITIVE', 'ACTION_POTENTIAL_TRUE_POSITIVE')
              ai-false-positive-query:
                SELECT count(*)
                FROM warehouse_simulation_alert wsa
                JOIN warehouse_alert wa ON wsa.name = wa.name
                WHERE wsa.analysis_name = ?
                AND (wa.payload ->> 'analyst_decision') IN ('analyst_decision_false_positive', 'analyst_decision_true_positive')
                AND (wsa.payload ->> 'recommendation_recommended_action') = 'ACTION_FALSE_POSITIVE'
              analyst-false-positive-query:
                SELECT count(*)
                FROM warehouse_simulation_alert wsa
                JOIN warehouse_alert wa ON wsa.name = wa.name
                WHERE wsa.analysis_name = ?
                AND (wa.payload ->> 'analyst_decision') = 'analyst_decision_false_positive'
                AND (wsa.payload ->> 'recommendation_recommended_action') = 'ACTION_FALSE_POSITIVE'

agents:
  name-agent:
    image:
      repository: registry.dev.s8ops.com/linguistics-agent-hotel-ns
      tag: "3.22.0"
    enabled: true

  geo-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/geo-agent-hotel
      tag: "1.11.0" #in https://gitlab.silenteight.com/hsbc-bank/sear-installation/-/blob/26ec033050f90d39074ae4057eaec77a5665f929/ae/nomad/version.vars#L19 there is a 1.9.0 version, but we have no docker image with that tag

  allow-list-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/allow-list-agent-hotel
      tag: "1.6.0-BUILD.124"

  is-pep-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/is-pep-agent-hotel
      tag: "1.7.0-BUILD.170"

  historical-decisions-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/historical-decisions-agent-hotel
      tag: "0.3.0-BUILD.106"

  date-agent:
    enabled: true
    image:
      repository: registry.dev.s8ops.com/date-agent-hotel-ns
      tag: "1.13.0"

  country-agent:
    enabled: true
    image:
      tag: "2.11.0"

  gender-agent:
    enabled: true
    image:
      tag: "1.8.0"

  document-comparer-agent:
    enabled: true
    image:
      tag: "2.17.0"

  document-number-agent:
    enabled: true
    image:
      tag: "2.17.0"

  learning-engine:
    enabled: true
    image:
      tag: "1.3.1"
