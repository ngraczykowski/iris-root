<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

  <changeSet id="adjudication-engine-analysis-1.4.0_1" author="ahaczewski">
    <dropColumn tableName="ae_analysis" columnName="state"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_2" author="ahaczewski">
    <dropView viewName="ae_analysis_query"/>
    <createView
        viewName="ae_analysis_query"
        path="sql/view_ae_analysis_query_v2.sql"
        relativeToChangelogFile="true"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_3" author="ahaczewski">
    <dropView viewName="ae_comments_context"/>
    <dropView viewName="ae_comments_match_context"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_4" author="ahaczewski">
    <createView
        viewName="ae_comments_match_context"
        path="sql/view_ae_comments_match_context_v2.sql"
        relativeToChangelogFile="true"/>
    <createView
        viewName="ae_comments_context"
        path="sql/view_ae_comments_context_v2.sql"
        relativeToChangelogFile="true"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_5" author="ahaczewski">
    <dropView viewName="ae_comments_context"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_6" author="ahaczewski">
    <createView
        viewName="ae_alert_recommendation_query"
        path="sql/view_ae_alert_recommendation_query.sql"
        relativeToChangelogFile="true"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_7" author="wkeska">
    <createView
        viewName="ae_analysis_match_feature_vector_elements_query"
        path="sql/view_ae_analysis_match_feature_vector_elements_query.sql"
        relativeToChangelogFile="true"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_9" author="wkeska">
    <createIndex
        tableName="ae_match_solution"
        indexName="uq_ix_ae_match_solution_analysis_id_match_id"
        unique="true">
      <column name="analysis_id"/>
      <column name="match_id"/>
    </createIndex>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_10" author="wkeska">
    <dropView viewName="ae_alert_match_solutions_query"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_11" author="wkeska">
    <createView
        viewName="ae_alert_match_solutions_query"
        path="sql/view_ae_alert_match_solutions_query_v2.sql"
        relativeToChangelogFile="true"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_12" author="ahaczewski">
    <dropView viewName="ae_analysis_match_feature_vector_elements_query"/>
  </changeSet>

  <changeSet id="adjudication-engine-analysis-1.4.0_13" author="ahaczewski">
    <createView
        viewName="ae_analysis_match_feature_vector_elements_query"
        path="sql/view_ae_analysis_match_feature_vector_elements_query_v2.sql"
        relativeToChangelogFile="true"/>
  </changeSet>
</databaseChangeLog>
