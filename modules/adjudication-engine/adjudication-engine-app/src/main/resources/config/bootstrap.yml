####################################################################################################
# Defaults (overridden by environment variables or arguments)
####################################################################################################

cloudapi:
  #-------------------------------------------------------------------------------------------------
  # WEB
  #-------------------------------------------------------------------------------------------------
  web:
    threads:
      io: 4
      worker: 16

  #-------------------------------------------------------------------------------------------------
  # DATABASE
  #-------------------------------------------------------------------------------------------------
  db:
    host: localhost
    port: 24580
    schema: public
    name: cloudapi
    user: cloudapi
    password: cloudapi
    url: jdbc:postgresql://${cloudapi.db.host}:${cloudapi.db.port}/${cloudapi.db.name}?currentSchema=${cloudapi.db.schema}
    connections:
      min: 1
      max: 10

  #-------------------------------------------------------------------------------------------------
  # MESSAGING
  #-------------------------------------------------------------------------------------------------
  rabbitmq:
    host: localhost
    port: 24130
    user: cloudapi
    password: cloudapi
    vhost: /
    tls:
      enabled: false

  messaging:
    concurrency: 4
    prefetch: 25

  name-screening:
    integration:
      request:
        outbound-exchange-name: cloudns.command
        outbound-routing-key: screening-engine.screen-customer
      receive:
        queue-name: cloudapi.alert-recommendation
      events:
        inbound-queue-name: cloudapi.screening-events

  #-------------------------------------------------------------------------------------------------
  # SCREENING ENGINE
  #-------------------------------------------------------------------------------------------------
  screening-engine:
    decision-group: CLOUD
    wc1:
      cache-ttl: 60
      group-id: 5nzbfqa9q6d71f13bjkc30ls3
    integration:
      commands:
        inbound-queue-name: screening-engine.commands
      alert:
        outbound-exchange-name: alert.unprocessed
        outbound-routing-key:
      decision-group:
        outbound-exchange-name: alert.metadata
        outbound-routing-key: alert.decision-groups
      check-pending-screening:
        outbound-exchange-name: cloudns.command
        outbound-routing-key: screening-engine.check-screening
      events:
        outbound-exchange-name: cloudns.event
        started-event-routing-key: screening-engine.screening-started-event
        finished-event-routing-key: screening-engine.screening-finished-event

#-------------------------------------------------------------------------------------------------
# APPLICATION NAME
#-------------------------------------------------------------------------------------------------
spring:
  application:
    name: cloudapi

#-------------------------------------------------------------------------------------------------
# PORTS
#-------------------------------------------------------------------------------------------------
server:
  port: 24500

grpc:
  server:
    port: 24501
