plugins {
  id('com.silenteight.iris.build.root-build')
  id('com.silenteight.iris.build.sonarqube')
}

subprojects {Project project ->
  pluginManager.withPlugin("java") {

    project.dependencies {
      implementation libs.jaxb.api
    }
  }
}

tasks.named(BasePlugin.CLEAN_TASK_NAME).configure {
  dependsOn tasks.named("deleteWebappPlugins")
}

tasks.register("deleteWebappPlugins", Delete).configure {
  delete fileTree("${rootProject.projectDir}/plugin/webapp") {
    include "*.jar"
  }
}

configure(subprojects - libs.silenteight.serp.governance.common.web.testing) {Project subproject ->
  subproject.pluginManager.withPlugin("java") {
    subproject.dependencies {
      testImplementation libs.silenteight.serp.governance.common.web.testing
    }
  }
}
