<div class="popup-window-header">
  <h1 class="popup-window-title"
      [translate]="restrictionId?
      translatePrefix + 'header.titleEdit':
      translatePrefix + 'header.titleAdd'">
  </h1>
</div>
<app-preloader class="preload-element" [class.is-active]="!status"></app-preloader>
<perfect-scrollbar>
  <div class="popup-window-content restriction-panel-content" *ngIf="status">
    <app-hint-feedback [settings]="error"></app-hint-feedback>
    <section class="modal-content-section first-modal-content-section">
      <div class="modal-content-section-label">
        <p [translate]=" translateSectionPrefix + 'sectionName.label'"
           class="required"></p>
      </div>
      <div class="modal-content-section-content">
        <div class="input-single-line">
          <div class="input-single-line-data">
            <input placeholder="{{translateSectionPrefix + 'sectionName.input.placeholder' | translate}}"
                   [(ngModel)]="restrictionName"
                   (focusout)="hasRestrictionName()" maxlength="64">
          </div>
        </div>
        <app-input-feedback [feedbackErrors]="restrictionNameError"></app-input-feedback>
      </div>
    </section>
    <section class="modal-content-section">
      <div class="modal-content-section-label">
        <p [translate]=" translateSectionPrefix + 'sectionCountry.label'"></p>
      </div>
      <div class="modal-content-section-content">
        <app-input-text-window
                [placeholder]="translateSectionPrefix + 'sectionCountry.placeholder'"
                [(textAreaValue)]="restrictionCountries"></app-input-text-window>
      </div>
    </section>
    <section class="modal-content-section">
      <div class="modal-content-section-label">
        <p [translate]=" translateSectionPrefix + 'sectionBatchTypes.label'"></p>
      </div>
      <div class="modal-content-section-content">
        <app-input-text-window
                [placeholder]="translateSectionPrefix + 'sectionBatchTypes.placeholder' "
                [(textAreaValue)]="restrictionUnits"></app-input-text-window>
      </div>
    </section>
    <section class="modal-content-section">
      <div class="modal-content-section-label">
        <p [translate]=" translateSectionPrefix + 'sectionUsers.label'"></p>
      </div>
      <div class="modal-content-section-content">
        <app-restriction-panel-users-management [assignedUsersList]="restrictionUserIds"
                                                (assignedUsersChange)="updateUsersList($event)"></app-restriction-panel-users-management>
      </div>
    </section>
  </div>
</perfect-scrollbar>
<section class="popup-window-footer">
  <div>
    <button class="button-outline"
            (click)="closePanel()"
            [translate]="translatePrefix + 'footer.buttonCancel'"></button>
    <button class="button-action"
            *ngIf="!restrictionId"
            [disabled]="shouldDisableActionButton()"
            [translate]="translatePrefix + 'footer.buttonAdd'"
            (click)="addRestriction()"></button>
    <button class="button-action"
            *ngIf="restrictionId"
            [disabled]="shouldDisableActionButton()"
            [translate]="translatePrefix + 'footer.buttonSave'"
            (click)="saveRestriction()"></button>
  </div>
</section>
