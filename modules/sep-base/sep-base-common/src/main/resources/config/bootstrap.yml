####################################################################################################
# Defaults (overridden by environment variables or arguments)
####################################################################################################

serp.consul.enabled: true
serp.consul.config.enabled: ${serp.consul.enabled}
serp.consul.host: localhost
serp.consul.port: 24999
serp.consul.instance: ${spring.application.name}-${HOSTNAME:localhost}

serp.keystore.password: LZKH70td5n
serp.truststore.password: ${serp.keystore.password}

# Symmetric key used to encrypt and decrypt secrets
serp.config.secret: change_me_to_secret_key

####################################################################################################
# CONFIGURATION
####################################################################################################

#---------------------------------------------------------------------------------------------------
# CLOUD
#---------------------------------------------------------------------------------------------------
spring:
  cloud:
    consul:
      scheme: https
      host: ${serp.consul.host}
      port: ${serp.consul.port}

      config:
        enabled: ${serp.consul.config.enabled}
        prefix: config/serp
        defaultContext: serp
        name: serp-${spring.application.name}
        format: FILES

        watch:
          # NOTE(ahaczewski): Disabled due to stupid-long timeouts in current implementation.
          #  Do not enable.
          enabled: false

      tls:
        key-store-instance-type: PKCS12
        key-store-path: ${serp.home}/cert/truststore.p12
        key-store-password: ${serp.truststore.password}
        certificate-path: ${serp.home}/cert/${spring.application.name}/${spring.application.name}-keystore.p12
        certificate-password: ${serp.keystore.password}

encrypt:
  key: ${serp.config.secret}
