#---------------------------------------------------------------------------------------------------
# SERVER
#---------------------------------------------------------------------------------------------------

server:
  forward-headers-strategy: native
  undertow:
    threads:
      io: 4
      worker: 16

  servlet:
    context-path: /rest/${spring.application.name}

  error:
    include-exception: true
    include-stacktrace: never

warehouse:
  messaging:
    concurrency: 4
    prefetch: 25

spring:
  #-------------------------------------------------------------------------------------------------
  # GENERAL
  #-------------------------------------------------------------------------------------------------
  aop:
    auto: false

  task:
    execution:
      pool:
        core-size: 8
        keep-alive: 10s
        max-size: 16
        queue-capacity: 10000
      thread-name-prefix: pool-task-

    scheduling:
      pool:
        size: 2
      thread-name-prefix: pool-scheduling-

  main:
    banner-mode: 'off'

  #-------------------------------------------------------------------------------------------------
  # MESSAGING
  #-------------------------------------------------------------------------------------------------
  rabbitmq:
    ssl:
      enabled: false
    listener:
      type: simple
      direct:
        consumers-per-queue: ${warehouse.messaging.concurrency}
        prefetch: ${warehouse.messaging.prefetch}
      simple:
        concurrency: 1
        max-concurrency: ${warehouse.messaging.concurrency}
        prefetch: ${warehouse.messaging.prefetch}

#---------------------------------------------------------------------------------------------------
# SEP BASE CONFIGURATION
#---------------------------------------------------------------------------------------------------

serp:
  show-env: true

  messaging:
    error-queue:
      enabled: true

test:
  messaging:
    integration:
      production-indexing-test-client-outbound:
        exchange-name: bridge.command
        routing-key: command.index-request.production
      simulation-indexing-test-client-outbound:
        exchange-name: sim.command
        routing-key: command.index-request.simulation
      personal-information-expired-indexing-test-client-outbound:
        exchange-name: bridge.retention
        routing-key: retention.personal-information-expired
      analysis-expired-indexing-test-client-outbound:
        exchange-name: sim.command
        routing-key: command.analysis-expired
      production-indexed-event-test-listener-inbound:
        queue-name: bridge.index-response.production
      simulation-indexed-event-test-listener-inbound:
        queue-name: sim.index-response.simulation
      alerts-expired-indexing-test-client-outbound:
        exchange-name: bridge.retention
        routing-key: retention.alerts-expired
      analysis-expired-indexing-test-client-outbound:
        exchange-name: testapp.command
        routing-key: command.analysis-expired
  generator:
    production-enabled: false
    simulation-enabled: false
    pii-expired-enabled: false
    alerts-expired-enabled: false
    cron: "*/15 * * * * ?"
