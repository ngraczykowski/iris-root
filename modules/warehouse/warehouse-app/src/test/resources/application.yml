spring:
  application:
    name: warehouse
  liquibase:
    enabled: false

keycloak:
  client-id: warehouse-frontend
  adapter:
    authServerUrl: fakeAuthHost:8000
    realm: sens-webapp
    publicClient: false
    confidentialPort: 0
    principalAttribute: preferred_username
    resource: backend
    sslRequired: external
    credentials.secret: 55555555-4444-3333-2222-000111000111

warehouse:
  alert-mapping:
    country-source-key: lob_country
  match-mapping:
  persistence:
    alert:
      labels:
      recommendation-date-field: "recommendationDate"
  messaging:
    broker:
      analysis-expired-indexing:
        queue-name: wh.retention.analysis-expired
        routing-key: command.analysis-expired
      alert-backup-indexing:
        queue-name: wh.index-request.backup
        routing-key: command.index-request.production
      alert-production-indexing:
        queue-name: wh.index-request.production
        routing-key: command.index-request.production
      qa-indexing:
        queue-name: wh.qa-index-request
        routing-key: event.qa-alert
      alert-simulation-indexing:
        queue-name: wh.index-request.simulation
        routing-key: command.index-request.simulation
      personal-information-expired-indexing:
        queue-name: wh.retention.personal-information-expired
        routing-key: retention.personal-information-expired
      alerts-expired-indexing:
        queue-name: wh.retention.alerts-expired
        routing-key: retention.alerts-expired
      to-remove:
        bindings: []
  indexer:
    analysis-expired-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.alert-production-indexing.queue-name}
    backup-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.alert-backup-indexing.queue-name}
    production-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.alert-production-indexing.queue-name}
    production-indexed-outbound:
      exchange-name: wh.event
      routing-key: event.index-response.production
    simulation-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.alert-simulation-indexing.queue-name}
    simulation-indexed-outbound:
      exchange-name: wh.event
      routing-key: event.index-response.simulation
    personal-information-expired-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.analysis-expired-indexing.queue-name.queue-name}
    alerts-expired-indexing-inbound:
      queue-name: ${warehouse.messaging.broker.alerts-expired-indexing.queue-name}
  environment:
    prefix: itest
  report:
    default-bucket: reports
    copy-csv-pattern: "COPY ( %s ) TO STDOUT WITH (FORMAT CSV, HEADER)"
  es:
    production-query-index: ${warehouse.environment.prefix}_production_alert
    production-match-query-index: ${warehouse.environment.prefix}_production_match
    scroll:
      search:
        batch-size: 1
        keep-alive-seconds: 10
  db:
    host: localhost
    port: 24910
    name: warehouse
    username: warehouse
    password: warehouse
  sampling:
    time-field-name: alert_recommendationDate
sep.filestorage:
  minio:
    url: http://localhost:9000
    access-key: admin
    private-key: admin123

warehouse.report.billing:
  year-field-name: alert_recommendationYear
  month-field-name: alert_recommendationMonth
  date-field-name: alert_recommendationDate
  year-month-label: date
  transpose-column:
    name: alert_s8_recommendation
    grouping-values:
      - name: ACTION_FALSE_POSITIVE
        label: count_solved_FP
      - name: ACTION_POTENTIAL_TRUE_POSITIVE
        label: count_solved_PTP
      - name: ACTION_INVESTIGATE
        label: count_solved_MI
    counter-label: count_alerts_received
    significant-values: [ ACTION_FALSE_POSITIVE, ACTION_POTENTIAL_TRUE_POSITIVE]
    significant-summation-label: count_alerts_solved

warehouse.report.metrics:
  production:
    date-field:
      name: index_timestamp
      label: Date
      source-pattern: yyyy-MM-dd HH:mm:ss
      target-pattern: yyyy-MM
    risk-type:
      name: alert_categories/hitType
      label: Risk Type
    hit-type:
      name: alert_DN_CASE.ExtendedAttribute5
      label: List Type
    country:
      name: s8_country
      label: Country
    recommendation-field:
      name: alert_s8_recommendation
      positive-value: ACTION_POTENTIAL_TRUE_POSITIVE
      negative-value: ACTION_FALSE_POSITIVE
    analyst-decision-field:
      name: alert_analyst_decision
      positive-value: analyst_decision_true_positive
      negative-value: analyst_decision_false_positive
    qa-decision-field:
      name: alert_qa.level-0.state
      positive-value: qa_decision_PASSED
      negative-value: qa_decision_FAILED
    efficiency:
      label: Efficiency
    ptp-effectiveness:
      label: PTP Effectiveness
    fp-effectiveness:
      label: FP Effectiveness

  simulation:
    date-field:
      name: index_timestamp
      label: Date
      source-pattern: yyyy-MM-dd HH:mm:ss
      target-pattern: yyyy-MM
    risk-type:
      name: alert_categories/hitType
      label: Risk Type
    hit-type:
      name: alert_DN_CASE.ExtendedAttribute5
      label: List Type
    country:
      name: s8_country
      label: Country
    recommendation-field:
      name: alert_recommendation_recommended_action
      positive-value: ACTION_POTENTIAL_TRUE_POSITIVE
      negative-value: ACTION_FALSE_POSITIVE
    analyst-decision-field:
      name: alert_analyst_decision
      positive-value: analyst_decision_true_positive
      negative-value: analyst_decision_false_positive
    qa-decision-field:
      name: alert_qa.level-0.state
      positive-value: qa_decision_PASSED
      negative-value: qa_decision_FAILED
    efficiency:
      label: Efficiency
    ptp-effectiveness:
      label: PTP Effectiveness
    fp-effectiveness:
      label: FP Effectiveness

warehouse.report.statistics:
  date-field-name: index_timestamp
  ai-decision:
    field: alert_recommendation_recommended_action
    significant-values: [ACTION_FALSE_POSITIVE, ACTION_POTENTIAL_TRUE_POSITIVE]
    false-positive-value: ACTION_FALSE_POSITIVE
  analyst-decision:
    field: alert_DN_CASE.currentState
    analyst-significant-values: [ Level 2 Review, Level 1 Review ]
    false-positive-value: Level 1 Review

warehouse.report.rbs:
  production:
    date-field-name: alert_recommendationDate
    columns:
      - name: alert_fvSignature
        label: fv_signature
      - name: alert_policyId
        label: policy_id
      - name: alert_policy_title
        label: policy_title
      - name: alert_stepId
        label: step_id
      - name: alert_step_title
        label: step_title
      - name: alert_s8_recommendation
        label: alert_recommendation
      - name: alert_extendedAttribute5
        label: risk_type
      - name: alert_features/commonAp:solution
        label: common_ap
      - name: alert_features/commonMp:solution
        label: common_mp
      - name: alert_features/commonNames:solution
        label: common_names
      - name: alert_features/dateOfBirth:solution
        label: date_of_birth
      - name: alert_features/gender:solution
        label: gender
      - name: alert_features/geoPlaceOfBirth:solution
        label: geo_place_of_birth
      - name: alert_features/geoResidencies:solution
        label: geo_residencies
      - name: alert_features/incorporationCountry:solution
        label: incorporation_country
      - name: alert_features/invalidAlert:solution
        label: invalid_alert
      - name: alert_features/isApTpMarked:solution
        label: is_ap_tp_marked
      - name: alert_features/isCaseTpMarked:solution
        label: is_case_tp_marked
      - name: alert_features/isPep:solution
        label: is_pep
      - name: alert_features/isTpMarked:solution
        label: is_tp_marked
      - name: alert_features/logicalDiscountingDob:solution
        label: logical_discounting_dob
      - name: alert_features/name:solution
        label: name
      - name: alert_features/nationalIdDocument:solution
        label: national_id_document
      - name: alert_features/nationalityCountry:solution
        label: nationality_country
      - name: alert_features/otherCountry:solution
        label: other_country
      - name: alert_features/otherDocument:solution
        label: other_document
      - name: alert_features/passportNumberDocument:solution
        label: passport_number_document
      - name: alert_features/registrationCountry:solution
        label: registration_country
      - name: alert_features/residencyCountry:solution
        label: residency_country
    grouping-columns:
      - name: alert_qa.level-0.state
        grouping-values:
          - value: qa_decision_PASSED
            label: QA_decision_false_positive
          - value: qa_decision_FAILED
            label: QA_decision_true_positive
      - name: alert_analyst_decision
        grouping-values:
          - value: analyst_decision_true_positive
            label: analyst_decision_FP
          - value: analyst_decision_false_positive
            label: analyst_decision_PTP

  simulation:
    date-field-name: index_timestamp
    columns:
      - name: alert_match_reason:feature_vector_signature
        label: fv_signature
      - name: alert_match_reason:policy
        label: policy_id
      - name: alert_match_reason:policy_title
        label: policy_title
      - name: alert_match_reason:step
        label: step_id
      - name: alert_match_reason:step_title
        label: step_title
      - name: alert_recommendation_recommended_action
        label: alert_recommendation
      - name: alert_categories/hitType
        label: risk_type
      - name: alert_features/commonAp:solution
        label: common_ap
      - name: alert_features/commonMp:solution
        label: common_mp
      - name: alert_features/commonNames:solution
        label: common_names
      - name: alert_features/dateOfBirth:solution
        label: date_of_birth
      - name: alert_features/gender:solution
        label: gender
      - name: alert_features/geoPlaceOfBirth:solution
        label: geo_place_of_birth
      - name: alert_features/geoResidencies:solution
        label: geo_residencies
      - name: alert_features/incorporationCountry:solution
        label: incorporation_country
      - name: alert_features/invalidAlert:solution
        label: invalid_alert
      - name: alert_features/isApTpMarked:solution
        label: is_ap_tp_marked
      - name: alert_features/isCaseTpMarked:solution
        label: is_case_tp_marked
      - name: alert_features/isPep:solution
        label: is_pep
      - name: alert_features/isTpMarked:solution
        label: is_tp_marked
      - name: alert_features/logicalDiscountingDob:solution
        label: logical_discounting_dob
      - name: alert_features/name:solution
        label: name
      - name: alert_features/nationalIdDocument:solution
        label: national_id_document
      - name: alert_features/nationalityCountry:solution
        label: nationality_country
      - name: alert_features/otherCountry:solution
        label: other_country
      - name: alert_features/otherDocument:solution
        label: other_document
      - name: alert_features/passportNumberDocument:solution
        label: passport_number_document
      - name: alert_features/registrationCountry:solution
        label: registration_country
      - name: alert_features/residencyCountry:solution
        label: residency_country
    grouping-columns:
      - name: alert_qa.level-0.state
        grouping-values:
          - value: qa_decision_PASSED
            label: QA_decision_false_positive
          - value: qa_decision_FAILED
            label: QA_decision_true_positive
      - name: alert_analyst_decision
        grouping-values:
          - value: analyst_decision_true_positive
            label: analyst_decision_FP
          - value: analyst_decision_false_positive
            label: analyst_decision_PTP

warehouse.report.accuracy:
  production:
    date-field-name: alert_recommendationDate
    columns:
      - name: alert_fvSignature
        label: alert_fvSignature
      - name: alert_policy
        label: alert_policy
      - name: alert_policy_title
        label: alert_policy_title
      - name: alert_step
        label: alert_step
      - name: alert_step_title
        label: alert_step_title
      - name: alert_id
        label: alert_id
      - name: alert_status
        label: alert_status
      - name: alert_recommendation
        label: alert_recommendation
      - name: alert_s8_recommendation
        label: alert_s8_recommendation
      - name: alert_recommendationDate
        label: alert_recommendationDate
      - name: alert_comment
        label: alert_comment
      - name: s8_country
        label: s8_country
      - name: alert_extendedAttribute5
        label: alert_extendedAttribute5
      - name: alert_analyst_decision
        label: alert_analyst_decision
      - name: alert_lastCaseComment
        label: alert_lastCaseComment
      - name: s8_discriminator
        label: s8_discriminator
    filters:
      - name: alert_analyst_decision
        allowed-values:
          - analyst_decision_false_positive
          - analyst_decision_true_positive
  simulation:
    date-field-name: index_timestamp
    columns:
      - name: alert_fvSignature
        label: alert_fvSignature
      - name: alert_policy
        label: alert_policy
      - name: alert_policy_title
        label: alert_policy_title
      - name: alert_step
        label: alert_step
      - name: alert_step_title
        label: alert_step_title
      - name: alert_id
        label: alert_id
      - name: alert_status
        label: alert_status
      - name: alert_recommendation
        label: alert_recommendation
      - name: alert_s8_recommendation
        label: alert_s8_recommendation
      - name: alert_recommendationDate
        label: alert_recommendationDate
      - name: alert_comment
        label: alert_comment
      - name: s8_country
        label: s8_country
      - name: alert_extendedAttribute5
        label: alert_extendedAttribute5
      - name: alert_analyst_decision
        label: alert_analyst_decision
      - name: alert_lastCaseComment
        label: alert_lastCaseComment
      - name: s8_discriminator
        label: s8_discriminator
    filters:
      - name: alert_analyst_decision
        allowed-values:
          - analyst_decision_false_positive
          - analyst_decision_true_positive

warehouse.report.ai-reasoning:
  production:
    date-field-name: alert_recommendationDate
    columns:
      - name: alert_fvSignature
        label: alert_fvSignature
      - name: alert_policy
        label: alert_policy
      - name: alert_policy_title
        label: alert_policy_title
      - name: alert_step
        label: alert_step
      - name: alert_step_title
        label: alert_step_title
      - name: alert_id
        label: alert_id
      - name: alert_status
        label: alert_status
      - name: alert_recommendation
        label: alert_recommendation
      - name: alert_s8_recommendation
        label: alert_s8_recommendation
      - name: alert_recommendationDate
        label: alert_recommendationDate
      - name: alert_comment
        label: alert_comment
      - name: s8_country
        label: s8_country
      - name: alert_DN_CASE.ExtendedAttribute5
        label: alert_DN_CASE.ExtendedAttribute5
      - name: s8_discriminator
        label: s8_discriminator
  simulation:
    date-field-name: index_timestamp
    columns:
      - name: alert_fvSignature
        label: alert_fvSignature
      - name: alert_policy
        label: alert_policy
      - name: alert_policy_title
        label: alert_policy_title
      - name: alert_step
        label: alert_step
      - name: alert_step_title
        label: alert_step_title
      - name: alert_id
        label: alert_id
      - name: alert_status
        label: alert_status
      - name: alert_recommendation
        label: alert_recommendation
      - name: alert_s8_recommendation
        label: alert_s8_recommendation
      - name: alert_recommendationDate
        label: alert_recommendationDate
      - name: alert_comment
        label: alert_comment
      - name: s8_country
        label: s8_country
      - name: alert_DN_CASE.ExtendedAttribute5
        label: alert_DN_CASE.ExtendedAttribute5
      - name: s8_discriminator
        label: s8_discriminator

warehouse.report.ai-reasoning-match-level:
  production:
    date-field-name: alert_recommendationDate
    columns:
      - name: match_feature_vector_signature
        label: Reasoning Branch ID
      - name: match_policy
        label: Policy ID
      - name: match_policy_title
        label: Policy Name
      - name: match_step
        label: Step ID
      - name: match_step_title
        label: Step Name
      - name: match_solution
        label: S8 Match Resolution
      - name: alert_recommended_action
        label: S8 Alert Resolution
      - name: alert_recommendation_comment
        label: S8 Alert Comment
      - name: alert_create_time
        label: S8 Alert Resolution Timestamp (UTC)
      - name: alert_firco_system_id
        label: Alert Client ID
      - name: s8_alert_name
        label: Alert S8 ID
      - name: alert_status
        label: Alert Status
      - name: alert_delivery_status
        label: Alert Delivery Status
      - name: s8_match_name
        label: Match S8 ID
  simulation:
    visible: false
    date-field-name: index_timestamp
    columns:
      - name: match_feature_vector_signature
        label: Reasoning Branch ID
      - name: match_policy
        label: Policy ID
      - name: match_policy_title
        label: Policy Name
      - name: match_step
        label: Step ID
      - name: match_step_title
        label: Step Name
      - name: match_solution
        label: S8 Match Resolution
      - name: alert_recommended_action
        label: S8 Alert Resolution
      - name: alert_recommendation_comment
        label: S8 Alert Comment
      - name: alert_create_time
        label: S8 Alert Resolution Timestamp (UTC)
      - name: alert_firco_system_id
        label: Alert Client ID
      - name: s8_alert_name
        label: Alert S8 ID
      - name: alert_status
        label: Alert Status
      - name: alert_delivery_status
        label: Alert Delivery Status
      - name: s8_match_name
        label: Match S8 ID
