#---------------------------------------------------------------------------------------------------
# SERVER
#---------------------------------------------------------------------------------------------------

# Embedded server configuration
server:
  forward-headers-strategy: native
  undertow:
    threads:
      io: ${warehouse.web.threads.io}
      worker: ${warehouse.web.threads.worker}

  servlet:
    context-path: /rest/${spring.application.name}

  error:
    include-exception: true
    include-stacktrace: never

#---------------------------------------------------------------------------------------------------
# MANAGEMENT
#---------------------------------------------------------------------------------------------------

# Management HTTP server
management:
  endpoint:
    health.show-details: always

  endpoints:
    web:
      base-path: /management
      exposure:
        include: [ "health", "info", "metrics", "prometheus", "loggers" ]
    # loggers endpoint is secured with mTLS
    loggers:
      sensitive: false

  metrics:
    tags:
      application: ${spring.application.name}

#-------------------------------------------------------------------------------------------------
# SPRING INTEGRATION
#-------------------------------------------------------------------------------------------------
integration:
  start-delay-seconds: 15
  poll-period-millis: 1000


spring:
  #-------------------------------------------------------------------------------------------------
  # GENERAL
  #-------------------------------------------------------------------------------------------------
  aop:
    auto: false

  task:
    execution:
      pool:
        core-size: 8
        keep-alive: 10s
        max-size: 16
        queue-capacity: 10000
      thread-name-prefix: pool-task-

    scheduling:
      pool:
        size: 2
      thread-name-prefix: pool-scheduling-

  main:
    banner-mode: 'off'

#-------------------------------------------------------------------------------------------------
# REST API AUTH
#-------------------------------------------------------------------------------------------------

sep.auth:
  permissionMethodsMappings:
    REPORTS_MANAGEMENT:
      - "GENERATE_REPORT"

  rolePermissionsMappings:
    BUSINESS_OPERATOR:
      - "REPORTS_MANAGEMENT"
