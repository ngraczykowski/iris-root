plugins {
  id "groovy"
  id "maven-publish"
  id "com.silenteight.iris.build.spring-boot-application"
  id "com.silenteight.iris.build.container-image"
}


description = "dataprep-app"

dependencies {
  implementation project(':dataprep-learning')

  implementation libs.silenteight.fab.cmapi.connector.api
  implementation libs.data.source.api.uds.lib
  implementation libs.data.source.agentinput.api
  implementation libs.data.source.categories.api
  implementation libs.data.source.api
  implementation libs.silenteight.registration.api.proto
  implementation libs.silenteight.registration.api.library
  implementation libs.grpc.client.spring.boot.starter
  implementation libs.vavr
  implementation libs.json.path
  implementation libs.jackson.dataformat.csv

  // Sentry
  implementation libs.sentry
  runtimeOnly libs.sentry.spring.boot.starter
  runtimeOnly libs.sentry.logback

  runtimeOnly libs.hibernate.validator
  runtimeOnly libs.spring.boot.starter.undertow
  runtimeOnly libs.spring.boot.starter.actuator
  runtimeOnly libs.brave.instrumentation.grpc
  runtimeOnly libs.spring.cloud.starter.sleuth
  runtimeOnly libs.spring.cloud.consul.discovery
  runtimeOnly libs.spring.cloud.starter.consul.config

  testImplementation project(':dataprep-test-fixtures')
  testImplementation libs.jsonassert
  testRuntimeOnly libs.junit.jupiter.engine
}

jar {
  manifest {
    attributes "Main-Class": "com.silenteight.fab.dataprep.FabDataPreparationApplication"
  }
}
