plugins {
  id "maven-publish"
  id "com.silenteight.iris.build.spring-boot-application"
  id "com.silenteight.iris.build.container-image"
}

description = "bridge-app"


dependencies {
  annotationProcessor libs.spring.boot.configuration.processor
  implementation libs.silenteight.core.bridge.protobuf.spring.boot.starter
  implementation libs.silenteight.recommendation.api.library
  implementation libs.silenteight.recommendation.api.proto
  implementation libs.silenteight.registration.api.library
  implementation libs.silenteight.registration.api.proto
  implementation libs.governance.model.api
  implementation libs.silenteight.governance.model.api.library

  implementation libs.adjudication.engine.api
  implementation libs.silenteight.adjudication.engine.api.library //?

  implementation libs.warehouse.data.api
  implementation libs.data.retention.api

  implementation libs.spring.aspects
  implementation libs.grpc.spring.boot.starter
  implementation libs.spring.boot
  implementation libs.spring.boot.actuator
  implementation libs.spring.boot.starter.undertow
  implementation libs.spring.boot.starter.validation
  implementation libs.spring.boot.starter.web
  implementation libs.spring.cloud.starter.consul.config
  implementation libs.spring.cloud.consul.discovery
  implementation libs.spring.cloud.starter.sleuth
  implementation libs.spring.boot.starter.amqp
  implementation libs.spring.boot.starter.data.jdbc
  implementation libs.spring.retry
  implementation libs.commons.lang3
  implementation libs.commons.collections
  implementation libs.commons.validator
  implementation libs.commons.io
  implementation libs.postgresql
  implementation libs.streamex
  implementation libs.vavr
  implementation libs.json.flattener
  implementation libs.liquibase.core
  runtimeOnly libs.ecs.logging.core
  runtimeOnly libs.logback.ecs.encoder
  runtimeOnly libs.sentry.logback
  runtimeOnly libs.sentry.spring.boot.starter
  implementation libs.spring.amqp.rabbit
  implementation libs.lz4.java
  implementation libs.brave.instrumentation.grpc
  implementation libs.micrometer.prometheus
  implementation libs.shedlock.spring
  implementation libs.shedlock.jdbc.provider


  //testImplementation libs.groovy.all
  testImplementation libs.spock.core
  testImplementation libs.test.containers.junit.jupiter
  testImplementation libs.test.containers.localstack
  testImplementation libs.spock.spring
  testImplementation libs.spring.boot.starter.test
  testImplementation libs.spring.test
  testImplementation libs.test.containers
  testImplementation libs.test.containers.spock
  testImplementation libs.test.containers.postgresql
  testImplementation libs.test.containers.rabbitmq
}

jar {
  manifest {
    attributes "Main-Class": "com.silenteight.bridge.core.CoreBridgeApplication"
  }
}
