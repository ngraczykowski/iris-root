plugins {
  id "com.silenteight.iris.build.web-application-starter"
  id "groovy"
}

description = "bridge-app"


dependencies {
  implementation libs.silenteight.core.bridge.protobuf.spring.boot.starter
  implementation libs.silenteight.recommendation.api.library
  implementation libs.silenteight.recommendation.api.proto
  implementation libs.silenteight.registration.api.library
  implementation libs.silenteight.registration.api.proto
  implementation libs.governance.model.api
  implementation libs.silenteight.governance.model.api.library

  implementation libs.adjudication.engine.api
  implementation libs.silenteight.adjudication.engine.api.library //?

  implementation libs.warehouse.data.api
  implementation libs.data.retention.api

  implementation libs.spring.aspects
  implementation libs.grpc.spring.boot.starter
  implementation libs.spring.cloud.starter.consul.config
  implementation libs.spring.cloud.consul.discovery
  implementation libs.spring.boot.starter.amqp
  implementation libs.spring.boot.starter.data.jdbc
  implementation libs.spring.retry
  implementation libs.commons.lang3
  implementation libs.commons.collections
  implementation libs.commons.validator
  implementation libs.commons.io
  implementation doNotUseLibs.streamex
  implementation doNotUseLibs.vavr
  implementation libs.json.flattener
  implementation libs.spring.amqp.rabbit
  implementation libs.lz4.java
  implementation libs.brave.instrumentation.grpc
  implementation libs.bundles.shedlock
  implementation libs.postgresql

  runtimeOnly libs.bundles.postgres.runtime

  testImplementation libs.groovy.json
  testImplementation libs.spock.core
  testImplementation libs.test.containers.junit.jupiter
  testImplementation libs.test.containers.localstack
  testImplementation libs.spock.spring
  testImplementation libs.spring.boot.starter.test
  testImplementation libs.spring.test
  testImplementation libs.test.containers
  testImplementation libs.test.containers.spock
  testImplementation libs.test.containers.postgresql
  testImplementation libs.test.containers.rabbitmq
}

jar {
  manifest {
    attributes "Main-Class": "com.silenteight.bridge.core.CoreBridgeApplication"
  }
}
