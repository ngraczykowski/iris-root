@startuml
title Simple Login Sequence Diagram

actor User
participant Frontend
participant Backend
participant Keycloak
database KeycloakDB


User -> Frontend : login
Frontend -> Keycloak : redirect user to the Keycloak
Keycloak -> User : login page
User -> Keycloak : type user and password
Keycloak -> KeycloakDB : authenticate user
KeycloakDB -> Keycloak : user roles
Keycloak -> Frontend : authenticate user - send token with roles
Frontend -> Backend : token with roles
Backend -> Backend : authorize user based on roles from the token
Backend -> Frontend : data

@enduml

INFO:
Our JWT token example.
https://jwt.io/#debugger-io?token=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJJSkQtNVZISUdxdzJVLVhIbmV4M2hfeVRSamxLMFZ1Wi1Lek4wZ01NM01rIn0.eyJqdGkiOiI0NWU2NDE5NS01MjE5LTRlNDMtYTJlOS05MGNmNDdlMzVkMzQiLCJleHAiOjE2MDIwNzc4MzUsIm5iZiI6MCwiaWF0IjoxNjAyMDc3NTM1LCJpc3MiOiJodHRwczovL3NlcnAtbWFzdGVyLnNpbGVudGVpZ2h0LmNvbS9hdXRoL3JlYWxtcy9zZW5zLXdlYmFwcCIsImF1ZCI6WyJiYWNrZW5kIiwiYWNjb3VudCJdLCJzdWIiOiJjYTNhYTljMy1lODI4LTQyMDQtYmE5Ni01ZWNkODMwYjQ3YTkiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJmcm9udGVuZCIsIm5vbmNlIjoiOGZhNDEwZDEtZGJlMi00YTUzLTg5NjAtNDBkZjkwMjkzMTdkIiwiYXV0aF90aW1lIjoxNjAyMDc3NTM1LCJzZXNzaW9uX3N0YXRlIjoiNzAxZWFhOWQtNmYxZS00NmY3LTk2M2YtYmQyZTM4Njg0YWE0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3NlcnAtbWFzdGVyLnNpbGVudGVpZ2h0LmNvbSIsImh0dHA6Ly9sb2NhbGhvc3Q6MjQ0MTAiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIkF1ZGl0b3IiLCJBbmFseXN0IiwiQWRtaW5pc3RyYXRvciIsIkJ1c2luZXNzIE9wZXJhdG9yIiwiQXBwcm92ZXIiXX0sInJlc291cmNlX2FjY2VzcyI6eyJiYWNrZW5kIjp7InJvbGVzIjpbImF1ZGl0LWdlbmVyYXRlLXJlcG9ydCJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6InNlcnAiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJwIiwiZ2l2ZW5fbmFtZSI6InNlcnAifQ.Svb43ld7dZOKCr5a6V4TcOKlaQWTVCINJhwpIGwh1G0TzTFasMhOMSxWRW6SKbDEbrT_F3xpjTqdYufzjC03-ukKqLhF9ypiIgfgvjZaafK55YgWj9qFfU_OydxQifweF69BbY1RwxEJb-G8-_RmElIbrDxR-kjfXR7gqBiKCEJUsnSpxaIsuJGHsjHfNDHYmtoo_LiS3Jx7HB_mswob2RMcBxyM1tNACuuCVN5mYW6EAR7AqXo0VSASzx68HJZ_T-lTbxkzBW2O86o1Q67gWbzbDsVUqBqsvqbm6mPw8DFF44z_Plo6rqRdXl_RFfPxQ6Nof8-EYl2ZrbNH910v3g&publicKey=-----BEGIN%20PUBLIC%20KEY-----%0AMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAi3B8L54J1A6C2EQAyQnT%0ALx11y4kfKX4KgaY%2Bx%2BTNLD93q3Vrw3quF6xaAY%2Bdn7wDyYEmap6T0qShd5l1X72o%0A2ToWv76igYg78eElOk6PVq3Hmo95NrS4T28mA02zlkvvB49W1STEa5830FPrAPpm%0AuNzSXTlBLh%2BxgBqeBmi%2B6PaeDJyTfmr0DapHTOG8u5wqjeCP8zJhDDmGgmNyWV6W%0AIZmj5aAvR5Rg4iTQjLybkGkbHuCVVZqim4pEXLKFu7CQPbVCgA5pEe2s7358XFwM%0AwGWsVm3p%2BaDhgeK38gkQZfamunUYd3wphVKXkSgxqlyq1dE01ujd3JbWxKr62o83%0A4wIDAQAB%0A-----END%20PUBLIC%20KEY-----%0A
