

# Embedded server configuration
server:
  forward-headers-strategy: native
  undertow:
    threads:
      io: ${ae.web.threads.io:4}
      worker: ${ae.web.threads.worker:16}

  error:
    include-exception: true
    include-stacktrace: never

spring:
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.xml
  application:
    name: sear-payments
  codec:
    max-in-memory-size: 1MB
  #-------------------------------------------------------------------------------------------------
  # GENERAL
  #-------------------------------------------------------------------------------------------------
  aop:
    auto: false

  task:
    execution:
      pool:
        core-size: 8
        keep-alive: 10s
        max-size: 16
        queue-capacity: 10000
      thread-name-prefix: pool-task-

    scheduling:
      pool:
        size: 2
      thread-name-prefix: pool-scheduling-

  main:
    banner-mode: 'off'
    allow-bean-definition-overriding : true

  #-------------------------------------------------------------------------------------------------
  # DATABASE
  #-------------------------------------------------------------------------------------------------
  datasource:
    # Postgres database
    type: com.zaxxer.hikari.HikariDataSource
    url: jdbc:postgresql://localhost:24881/sear-payments-bridge?currentSchema=public
    username: sear-payments-bridge
    password: sear-payments-bridge
    initialization-mode: never

  #-------------------------------------------------------------------------------------------------
  # RABBITMQ
  #-------------------------------------------------------------------------------------------------
  rabbitmq:
    host: localhost
    port: 24160
    username: dev
    password: dev
    virtual-host: /

  jackson:
    default-property-inclusion: NON_NULL

  webflux:
    base-path: /rest/${spring.application.name}

info:
  env: ${ae.env:local}


grpc:
  server:
    port: 24803
