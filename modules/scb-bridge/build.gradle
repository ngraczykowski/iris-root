plugins {
  id "idea"
  id "java"
  id "groovy"
  id "maven-publish"
  id "org.springframework.boot" version "2.3.8.RELEASE"
  id 'com.silenteight.gradle.wrapper' version '1.0.25'
  id 'com.silenteight.gradle.release' version '1.2.0'
  id 'com.silenteight.gradle.convention' version '1.20.3'
  id 'org.sonarqube' version '2.8'
}

projectSetup {
  javaVersion = JavaVersion.VERSION_11
}

ext {
  gradleScriptDir = "${rootProject.projectDir}/gradle/scripts"
}

apply from: "${gradleScriptDir}/dependencies.gradle"

configurations {
  implementation.extendsFrom starterCommon
  implementation.extendsFrom starterGrpc
  implementation.extendsFrom starterSpringApp
  implementation.extendsFrom starterMessaging

  implementation.extendsFrom starterDatabase
  runtimeOnly.extendsFrom starterDatabaseRuntime

  testImplementation.extendsFrom starterSpringTest
  testImplementation.extendsFrom starterSpockTest
}

jar {
  manifest {
    attributes "Main-Class": "com.silenteight.customerbridge.CustomerBridgeApplication"
  }
}