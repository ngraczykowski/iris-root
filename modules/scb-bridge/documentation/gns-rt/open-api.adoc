= GNS-RT Integration Protocol

OpenAPI Specification is an API description format for REST APIs.
Definition below contains:

* available endpoints
* request (input) format and information about required fields
* response (output) format
* authentication method
* available errors
* contact information, license, terms of use

.Definition of OpenAPI protocol
[source,indent=0,tabsize=4]
----
openapi: 3.0.0
info:
  version: "1.0.0-SNAPSHOT"
  title: 'SENS SCB GNS-RT Integration API'
  description: >-
    The API in design for use by GNS-RT system to generate recommendations for FSK screening
    results.
  contact:
    name: Silent Eight SERP Development Team
    email: serp-proj@silenteight.com

paths:
  /rest/scb-bridge/v1/gnsrt/recommendation:
    post:
      description: Generates recommendations for a list of input alerts.
      requestBody:
        description: Information about the alerted party and all the alerts generated by FSK.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GnsRtRecommendationRequest'

      responses:
        200:
          description: The generated recommendations.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GnsRtRecommendationResponse'

        400:
          description: >-
            The input request contents validation failed. The details are attached in the response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

        406:
          description: >-
            The input request content type was not `application/json` that this service requires.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

        500:
          description: >-
            The service failed to fulfil the request due to internal failure. Please report this
            error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

        503:
          description: >-
            The service failed to fulfil the request because internal services communication timed
            out or failed. The details of failure are attached in the response. Please retry the
            request before reporting an error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    GnsRtRecommendationRequest:
      type: object
      properties:
        screenCustomerNameRes:
          type: object
          properties:
            header:
              type: object
              properties:
                originationDetails:
                  type: object
                  properties:
                    trackingId:
                      type: string
                  required:
                    - trackingId
              required:
                - originationDetails
            screenCustomerNameResPayload:
              type: object
              properties:
                payloadFormat:
                  type: string
                payloadVersion:
                  type: string
                screenCustomerNameResInfo:
                  type: object
                  properties:
                    header:
                      type: object
                      properties:
                        userBankID:
                          type: string
                        screeningUniqueReference:
                          type: string
                        sourceSystem:
                          type: string
                        watchlistTypeAll:
                          type: string
                        watchlistTypeSanctions:
                          type: string
                        watchlistTypePEP:
                          type: string
                        watchlistTypeAM:
                          type: string
                        watchlistTypeDD:
                          type: string
                        countryCode:
                          type: string
                        segment:
                          type: string
                        clientType:
                          type: string
                        partyType:
                          type: string
                        genericSearchFlag:
                          type: string
                        priorityScreeningFlag:
                          type: string
                        userDepartment:
                          type: string
                        requestorOrGroupMailId:
                          type: string
                        emailNotificationRequiredOrNot:
                          type: string
                        responseType:
                          type: string
                        requestInTime:
                          type: string
                          format: date-time
                        requestOutTime:
                          type: string
                          format: date-time
                      required:
                        - userBankID
                        - sourceSystem
                    screenableData:
                      $ref: '#/components/schemas/ScreenableData'
                    immediateResponseData:
                      $ref: '#/components/schemas/ImmediateResponseData'
                  required:
                    - header
                    - screenableData
                    - immediateResponseData
              required:
                - screenCustomerNameResInfo
          required:
            - header
            - screenCustomerNameResPayload
      required:
        - screenCustomerNameRes


    ImmediateResponseData:
      type: object
      properties:
        immediateResponseTimestamp:
          type: string
          format: date-time
          example: '2020-02-20T21:42:04.456'
          pattern: 'yyyy-MM-ddTHH:mm:ss[.SSS]'
          description: >-
            Date when alerts were screened.
            Available formats:
            yyyy-MM-dd'T'HH:mm:ss, timezone: Asia/Hong_Kong
            yyyy-MM-dd'T'HH:mm:ss.SSS, timezone: Asia/Hong_Kong
        overAllStatus:
          $ref: '#/components/schemas/GnsRtAlertStatus'
        alerts:
          type: array
          items:
            $ref: '#/components/schemas/GnsRtAlert'
      required:
        - alerts
        - immediateResponseTimestamp


    ScreenableData:
      type: object
      properties:
        amlcountry:
          type: string
        sourceSystemIdentifier:
          type: string
        customerIdentificationNo:
          type: string
        clientType:
          type: string
        fullLegalName:
          type: string
        fullTradingName:
          type: string
        legalParentOrGroupName:
          type: string
        executiveManagementNames:
          type: string
        supplementaryCardName:
          type: string
        alternateName1:
          type: string
        alternateName2:
          type: string
        alternateName3:
          type: string
        alternateNameRest:
          type: string
        registeredOrResidentialAddress:
          type: string
        registeredOrResidentialAddressCountry:
          type: string
        mailingOrCommunicationAddress:
          type: string
        mailingOrCommunicationAddressCountry:
          type: string
        operatingOrOfficialAddress:
          type: string
        operatingOrOfficialAddressCountry:
          type: string
        otherAddress:
          type: string
        otherAddressCountry:
          type: string
        registeredAddressOfHeadOffice:
          type: string
        registeredAddressCountryOfHeadOffice:
          type: string
        registeredAddressOfParentCompany:
          type: string
        registeredAddressCountryOfParentCompany:
          type: string
        nationalityAll:
          type: string
        establishmentCountryOfHO:
          type: string
        establishmentCountryOfParentCompany:
          type: string
        identificationType1:
          type: string
        identificationNumber1:
          type: string
        identificationType2:
          type: string
        identificationNumber2:
          type: string
        identificationType3:
          type: string
        identificationNumber3:
          type: string
        identificationType4:
          type: string
        identificationNumber4:
          type: string
        identificationTypeRest:
          type: string
        identificationNumberRest:
          type: string
        dateOfBirthOrRegistration:
          type: string
        countryOfBirthOrRegistration:
          type: string
        homeStateAuthorityOrGovtCountryName:
          type: string
        nameOfStockExchange:
          type: string
        nameOfAuthority:
          type: string
        businessNature:
          type: string
        clientLegalEntityType:
          type: string
        gender:
          type: string
        countryOfEmployment:
          type: string
        addressCity:
          type: string
        dateTimeStamp:
          type: string
        supplementaryInformation1:
          type: string
        supplementaryInformation2:
          type: string
        supplementaryInformation3:
          type: string
        supplementaryInformation4:
          type: string
        supplementaryInformation5:
          type: string
        supplementaryInformation6:
          type: string
        supplementaryInformation7:
          type: string
        supplementaryInformation8:
          type: string
        supplementaryInformation9:
          type: string
        supplementaryInformation10:
          type: string
        partyType:
          type: string
        supplierType:
          type: string
        acctOrRelationshipOrProfileClosedDate:
          type: string
        lastCDDApprovedDate:
          type: string
        linkedCustomerIdentificationNo:
          type: string
        natureOfRelationshipWithHomeStateAuthority:
          type: string
        ownershipStatusOfClient:
          type: string
        relationshipToThePrimaryCardholder:
          type: string
        rmcodeOfCDDOwner:
          type: string
        rmlocationOfCDDOwner:
          type: string
        clientSegment:
          type: string
        clientSubSegment:
          type: string
        classesOfBeneficiary:
          type: string
        customerStatus:
          type: string
        staffAccountIdentifier:
          type: string
        relatedPartyType:
          type: string
        casaFlag:
          type: string
        priorityIndicator:
          type: string
        relianceFlgOrSuppTypOrKoreanName:
          type: string
        realTimeMessageIndicator:
          type: string
        changeOrPriorityIndicator:
          type: string
        alternateID1Description:
          type: string
        alternateID1:
          type: string
        alternateID2Description:
          type: string
        alternateID2:
          type: string
        cddriskRating:
          type: string
        pepstatus:
          type: string
      required:
        - amlcountry
        - clientType

    GnsRtAlertStatus:
      type: string
      enum:
        - POTENTIAL_MATCH
        - NO_MATCH
        - MATCH
        - FALSE_MATCH
        - ERROR

    GnsRtAlert:
      type: object
      properties:
        watchlistType:
          type: string
        alertStatus:
          $ref: '#/components/schemas/GnsRtAlertStatus'
        alertID:
          type: string
        hitList:
          type: array
          items:
            $ref: '#/components/schemas/GnsRtHit'
      required:
        - alertID
        - alertStatus
        - hitList
        - watchlistType

    GnsRtHit:
      type: object
      properties:
        hitID:
          type: string
        hitDetails:
          type: string
      required:
        - hitID
        - hitDetails

    GnsRtRecommendationResponse:
      type: object
      description: The recommendations generated for each of the input alerts.
      properties:
        silent8Response:
          type: object
          properties:
            alerts:
              type: array
              items:
                type: object
                properties:
                  alertId:
                    type: string
                    description: The Alert identifier this recommendation is for.
                  comments:
                    type: string
                    description: Human-friendly justification for the recommended action.
                  recommendation:
                    type: string
                    description: The action Silent Eight recommends to take for this alert.
                    enum:
                      - INVESTIGATE
                      - FALSE_POSITIVE
                      - POTENTIAL_TRUE_POSITIVE
                  recommendationTimestamp:
                    type: string
                    description: Timestamp the recommendation was generated at.
                    format: date-time
                  watchlistType:
                    type: string
                required:
                  - alertId
                  - comments
                  - recommendation
                  - recommendationTimestamp
                  - watchlistType
          required:
            - alerts
      required:
        - silent8Response

    ErrorResponse:
      type: object
      description: The error information and details.
      properties:
        status:
          type: integer
        error:
          type: string
        timestamp:
          type: string
          format: date-time
        message:
          type: string
      required:
        - status
        - error
        - timestamp

----
