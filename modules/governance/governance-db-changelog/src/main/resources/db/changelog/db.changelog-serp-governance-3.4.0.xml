<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet id="serp-governance-3.4.0-1" author="tkleszcz">
    <comment>
      Add feature_set_id column.
    </comment>

    <dropView viewName="governance_reasoning_branch_features_query"/>

    <!--@formatter:off-->
    <createView viewName="governance_reasoning_branch_features_query">
      SELECT gfv.feature_vector_id   AS feature_vector_id
      , gfs.feature_set_id           AS feature_set_id
      , gfs.features                 AS features
      FROM governance_feature_vector gfv
      LEFT JOIN governance_feature_set gfs
      ON gfv.features_signature = gfs.features_signature
    </createView>
    <!--@formatter:on-->
  </changeSet>
</databaseChangeLog>
