####################################################################################################
# Defaults (overridden by environment variables or arguments)
####################################################################################################

serp.rabbitmq.host: localhost
serp.rabbitmq.port: 24130
serp.rabbitmq.user: governance
serp.rabbitmq.password: governance
serp.rabbitmq.vhost: /
#serp.rabbitmq.addresses: ${serp.rabbitmq.host}:${serp.rabbitmq.port}
serp.messaging.concurrency: 4
serp.messaging.prefetch: 25
serp.messaging.encryption.enabled: false
serp.messaging.encryption.key-seed: change_me_please
serp.messaging.encryption.salt: change_me_please

####################################################################################################
# CONFIGURATION
####################################################################################################

spring:
  rabbitmq:
    # virtual-host:
    # addresses: ${serp.rabbitmq.addresses}
    host: ${serp.rabbitmq.host}
    port: ${serp.rabbitmq.port}
    username: ${serp.rabbitmq.user}
    password: ${serp.rabbitmq.password}
    virtual-host: ${serp.rabbitmq.vhost}
    ssl:
      enabled: ${serp.tls.enabled}
      key-store: file:${serp.keystore.path}
      key-store-password: ${serp.keystore.password}
      trust-store: file:${serp.truststore.path}
      trust-store-password: ${serp.truststore.password}
    listener:
      type: simple
      direct:
        consumers-per-queue: ${serp.messaging.concurrency}
        prefetch: ${serp.messaging.prefetch}
      simple:
        concurrency: 1
        max-concurrency: ${serp.messaging.concurrency}
        prefetch: ${serp.messaging.prefetch}

# Spring Integration
integration:
  start-delay-seconds: 15
  poll-period-millis: 1000

# Encryption
serp:
  messaging:
    encryption:
      enabled: ${serp.rabbitmq.encryption.enabled}
      key-seed: ${serp.rabbitmq.encryption.key.seed}
      salt: ${serp.rabbitmq.encryption.key.salt}
      key-size-in-bits: ${serp.rabbitmq.encryption.key.size}
      mac-size-in-bits: ${serp.rabbitmq.encryption.mac.size}
      nonce-size-in-bits: ${serp.rabbitmq.encryption.nonce.size}
      nonce-header: ${serp.rabbitmq.encryption.nonce.header}

  governance:
    feature-vector:
      integration:
        request:
          exchange-name: feature-vector
          routing-key: feature-vector.solved
        receive:
          queue-name: governance.analytics